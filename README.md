## Distributed File System: 

- Make sure you are using available ports prior to running the program. Prior to running the code, use the following POSIX command to check if the port you want to use is available: 

	$ lsof -i:<port_number> 

- The above step is just for extra precaution, my code will do sufficient error checking. 
- Backup server will respond with an appropriate error message if a client attempts to connect to it 
..* it will provide the client with the IP:Port of the primary  
- Once the server(s) are running, DO NOT MODIFY the primary file 
- When you only have the primary running and then start the backup, give the backup a few seconds to synchronize with the primary prior to crashing either server (1-2 seconds to be safe)
- Backup will detect the death of the primary within 2 seconds and will update the primary file 
- When reading the primary file, you can ignore the third value (explained below) 
- Contact me if you have any problems running the server 


## Syntax of the Primary File: 

[PRIMARY_IP_ADDRESS] [PRIMARY_PORT] [COMMIT_PORT] 

*[COMMIT_PORT] is updated by the server as necessary, you do not need to provide this value.*

### Sample Primary File: 

127.0.0.1 8080 


## How to run the server(s) via terminal (order matters): 

1. Compile the source using the makefile provided:
```
$ make 
```
2. Start the Primary Server:
```
$ java FileServer -ip <value> -port <value> -dir <value> -primary <FFF> -bip <XXX> -bport <YYY>
```
Example:
```
$ java FileServer -dir /Users/amir/Desktop/test -primary /Users/amir/Desktop/primary.txt -bip 127.0.0.1 -bport 5938
```
3. Start the Backup Server *(‘ip’ And ‘port’ must match the values you provided for ‘bip’ and ‘bport’ above)*:
```
$ java FileServer -ip <XXX> -port <YYY> -dir <value> -primary <FFF>
```
Example: 
```
$ java FileServer -ip 127.0.0.1 -port 5938 -dir /Users/amir/Desktop/backup -primary /Users/amir/Desktop/primary.txt
```

4. System is now up and running 


### How to gracefully kill the server via terminal: 

CTRL-C 

Note: you will see a message printed on the terminal to confirm the server has been gracefully killed

Graceful kill will delete ALL files that were generated by the server except the files created from committed transactions 

### How to hard kill the server via terminal: 

$ kill -9 <PID> 

A hard kill will allow you to observe the hidden files that may have been created by the server during runtime. A hard kill does not delete any files. 



## Usage: 

	$ java FileServer -ip [ip_address_string] -port [port_number] -dir <directory_path> -primary <primary_file_path> -bip <backup_ip_address> -bport <backup_port_number>

The following options are available: 
-dir 		 (required) Absolute path to the server's filesystem (i.e. /Users/john/Desktop/tmp/) 
-primary 	 (required) Absolute path to the file that contains the address:port of the primary server 
-ip 		 IP address to bind to (default: 127.0.0.1) 
-port 		 Port number to bind to (default: 8080) 
-bip 		 IP address of the backup server (only provide this field if you are starting the primary server 
-bport 		 Port number of the backup server (only provide this field if you are starting the primary server 


## Syntax Of Primary File: 

[IP_ADDRESS] [PORT] [COMMIT_PORT]

*[COMMIT_PORT] is updated by the server as necessary, you do not need to provide this value.*


